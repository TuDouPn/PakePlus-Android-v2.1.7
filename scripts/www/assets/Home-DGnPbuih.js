import{n as e,o as t,t as n}from"./_plugin-vue_export-helper-dCxJz2px.js";import{n as r,t as i}from"./app-DrDiLzw2.js";import{n as a,t as o}from"./style-axx0y2Fr.js";import{t as s}from"./style-CFVqLaeA.js";import{t as c}from"./style-BtfqK5p_.js";import{At as l,Dt as u,Et as d,F as f,G as p,M as m,N as h,Ot as g,R as _,Tt as v,c as y,ct as b,et as x,g as S,it as C,j as w,k as T,kt as E,lt as D,s as O,st as k,t as A,ut as j,vt as M,xt as N}from"./index-D-Puxli-.js";var[P,F]=S(`notice-bar`),I=y(j({name:P,props:{text:String,mode:String,color:String,delay:_(1),speed:_(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}},emits:[`close`,`replay`],setup(e,{emit:n,slots:r}){let i=0,a=0,o,s=E(),c=E(),l=g({show:!0,offset:0,duration:0}),d=()=>{if(r[`left-icon`])return r[`left-icon`]();if(e.leftIcon)return D(A,{class:F(`left-icon`),name:e.leftIcon},null)},_=()=>{if(e.mode===`closeable`)return`cross`;if(e.mode===`link`)return`arrow`},y=t=>{e.mode===`closeable`&&(l.show=!1,n(`close`,t))},b=()=>{if(r[`right-icon`])return r[`right-icon`]();let e=_();if(e)return D(A,{name:e,class:F(`right-icon`),onClick:y},null)},S=()=>{l.offset=i,l.duration=0,m(()=>{T(()=>{l.offset=-a,l.duration=(a+i)/+e.speed,n(`replay`)})})},C=()=>{let t=e.scrollable===!1&&!e.wrapable,n={transform:l.offset?`translateX(${l.offset}px)`:``,transitionDuration:`${l.duration}s`};return D(`div`,{ref:s,role:`marquee`,class:F(`wrap`)},[D(`div`,{ref:c,style:n,class:[F(`content`),{"van-ellipsis":t}],onTransitionend:S},[r.default?r.default():e.text])])},k=()=>{let{delay:t,speed:n,scrollable:r}=e,u=p(t)?t*1e3:0;i=0,a=0,l.offset=0,l.duration=0,clearTimeout(o),o=setTimeout(()=>{if(!s.value||!c.value||r===!1)return;let e=f(s).width,t=f(c).width;(r||t>e)&&T(()=>{i=e,a=t,l.offset=-a,l.duration=a/+n})},u)};return O(k),w(k),h(`pageshow`,k),t({reset:k}),v(()=>[e.text,e.scrollable],k),()=>{let{color:t,wrapable:n,background:r}=e;return u(D(`div`,{role:`alert`,class:F({wrapable:n}),style:{color:t,background:r}},[d(),C(),b()]),[[x,l.show]])}}})),L={class:`page-container`},R={class:`content`},z=n({__name:`Home`,setup(t){let n=i(),u=E(`加载中...`),f=E(``),p=E(!1),m=async()=>{p.value=!0;try{let t=await e.getMotto();t&&t.hitokoto&&(u.value=t.hitokoto,f.value=`—— ${t.from_who||t.from}`)}catch{u.value=`获取失败`}finally{p.value=!1}};return M(()=>{m()}),(e,t)=>{let i=c,h=I,g=s,_=a,v=o,y=r;return N(),k(`div`,L,[D(i,{title:`经营概览`}),C(`div`,R,[D(h,{"left-icon":`volume-o`,text:u.value||`今日暂无寄语`},null,8,[`text`]),D(g,{style:{"margin-top":`20px`},num:`1`,price:`999.00`,desc:`预计今日收益`,title:`今日经营指数`,thumb:`https://fastly.jsdelivr.net/npm/@vant/assets/ipad.jpeg`}),D(v,{title:`店铺状态`},{default:d(()=>[D(_,{title:`今日寄语`,label:f.value},null,8,[`label`]),D(_,{title:`店铺名称`,value:l(n).shopName},null,8,[`value`]),D(_,{title:`当前店长`,value:l(n).userName},null,8,[`value`])]),_:1}),D(y,{type:`primary`,block:``,class:`refresh-btn`,onClick:m,loading:p.value},{default:d(()=>[...t[0]||=[b(` 刷新每日一言 `,-1)]]),_:1},8,[`loading`])])])}}},[[`__scopeId`,`data-v-00bf6bb1`]]);export{z as default};