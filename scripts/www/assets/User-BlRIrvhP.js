import{n as e,r as t,t as n}from"./_plugin-vue_export-helper-dCxJz2px.js";import{n as r,t as i}from"./app-DrDiLzw2.js";import{t as a}from"./function-call-CcfrN48q.js";import{t as o}from"./field-BoM_Cbja.js";import{n as s,t as c}from"./style-axx0y2Fr.js";import{At as l,Et as u,ct as d,it as f,jt as p,kt as m,lt as h,st as g,vt as _,xt as v}from"./index-D-Puxli-.js";var y={class:`page-container`},b={class:`user-header`},x={class:`user-info`},S={class:`fact-content`},C={key:0},w={style:{"font-size":`16px`,"font-weight":`bold`,"margin-bottom":`8px`}},T={style:{"font-size":`12px`,color:`#999`}},E={key:1},D=n({__name:`User`,setup(n){let D=i(),O=m(``),k=m(null),A=m(!1),j=()=>{O.value&&=(D.setUserName(O.value),a(`修改成功`),``)},M=async()=>{A.value=!0;try{let t=await e.getHistory();t&&t.content&&(k.value={title:t.content,year:`${t.origin?.dynasty||`未知`} · ${t.origin?.author||`佚名`}`})}catch{k.value={title:`获取失败`,year:``}}finally{A.value=!1}};return _(()=>{M()}),(e,n)=>{let i=t,a=s,m=r,_=c,N=o;return v(),g(`div`,y,[f(`div`,b,[h(i,{round:``,width:`80`,height:`80`,src:`https://fastly.jsdelivr.net/npm/@vant/assets/cat.jpeg`}),f(`div`,x,[f(`h3`,null,p(l(D).userName),1),f(`p`,null,p(l(D).shopName),1)])]),h(_,{inset:``,title:`今日诗词`},{default:u(()=>[h(a,null,{default:u(()=>[f(`div`,S,[k.value?(v(),g(`div`,C,[f(`div`,w,p(k.value.title),1),f(`div`,T,p(k.value.year),1)])):(v(),g(`div`,E,`Loading...`))])]),_:1}),h(m,{size:`small`,block:``,onClick:M,loading:A.value},{default:u(()=>[...n[1]||=[d(`换一首`,-1)]]),_:1},8,[`loading`])]),_:1}),h(_,{inset:``,title:`设置`,style:{"margin-top":`20px`}},{default:u(()=>[h(N,{modelValue:O.value,"onUpdate:modelValue":n[0]||=e=>O.value=e,label:`修改昵称`,placeholder:`输入新昵称`},{button:u(()=>[h(m,{size:`small`,type:`primary`,onClick:j},{default:u(()=>[...n[2]||=[d(`保存`,-1)]]),_:1})]),_:1},8,[`modelValue`])]),_:1})])}}},[[`__scopeId`,`data-v-c6940d39`]]);export{D as default};