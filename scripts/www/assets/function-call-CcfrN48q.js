import{a as e,i as t,o as n}from"./_plugin-vue_export-helper-dCxJz2px.js";import{$ as r,A as i,B as a,Dt as o,G as s,H as c,L as l,N as u,Ot as d,Q as f,St as ee,T as p,Tt as m,U as h,V as g,W as _,Y as v,_t as y,c as b,dt as x,et as S,g as C,gt as w,h as te,ht as ne,j as T,kt as E,l as re,lt as D,m as O,mt as ie,n as ae,nt as k,o as A,pt as j,q as M,rt as oe,t as N,tt as P,ut as F,vt as I,x as L,yt as R,z}from"./index-D-Puxli-.js";var se={show:Boolean,zIndex:a,overlay:g,duration:a,teleport:[String,Object],lockScroll:g,lazyRender:g,beforeClose:Function,overlayProps:Object,overlayStyle:Object,overlayClass:null,transitionAppear:Boolean,closeOnClickOverlay:g};function ce(e,t){return e>t?`horizontal`:t>e?`vertical`:``}function B(){let e=E(0),t=E(0),n=E(0),r=E(0),i=E(0),a=E(0),o=E(``),s=E(!0),c=()=>o.value===`vertical`,l=()=>o.value===`horizontal`,u=()=>{n.value=0,r.value=0,i.value=0,a.value=0,o.value=``,s.value=!0};return{move:(c=>{let l=c.touches[0];n.value=(l.clientX<0?0:l.clientX)-e.value,r.value=l.clientY-t.value,i.value=Math.abs(n.value),a.value=Math.abs(r.value),(!o.value||i.value<10&&a.value<10)&&(o.value=ce(i.value,a.value)),s.value&&(i.value>5||a.value>5)&&(s.value=!1)}),start:(n=>{u(),e.value=n.touches[0].clientX,t.value=n.touches[0].clientY}),reset:u,startX:e,startY:t,deltaX:n,deltaY:r,offsetX:i,offsetY:a,direction:o,isVertical:c,isHorizontal:l,isTap:s}}var V=0,H=`van-overflow-hidden`;function U(e,t){let n=B(),r=t=>{n.move(t);let r=n.deltaY.value>0?`10`:`01`,{scrollHeight:a,offsetHeight:o,scrollTop:s}=i(t.target,e.value),c=`11`;s===0?c=o>=a?`00`:`01`:s+o>=a&&(c=`10`),c!==`11`&&n.isVertical()&&!(parseInt(c,2)&parseInt(r,2))&&p(t,!0)},a=()=>{document.addEventListener(`touchstart`,n.start),document.addEventListener(`touchmove`,r,{passive:!1}),V||document.body.classList.add(H),V++},o=()=>{V&&(document.removeEventListener(`touchstart`,n.start),document.removeEventListener(`touchmove`,r),V--,V||document.body.classList.remove(H))},s=()=>t()&&a(),c=()=>t()&&o();T(s),y(c),w(c),m(t,e=>{e?a():o()})}function W(e){let t=E(!1);return m(e,e=>{e&&(t.value=e)},{immediate:!0}),e=>()=>t.value?e():null}var[le,ue]=C(`overlay`),de=b(F({name:le,inheritAttrs:!1,props:{show:Boolean,zIndex:a,duration:a,className:null,lockScroll:g,lazyRender:g,customStyle:Object,teleport:[String,Object]},setup(e,{attrs:t,slots:n}){let r=E(),i=W(()=>e.show||!e.lazyRender),a=t=>{e.lockScroll&&p(t,!0)},c=i(()=>{let i=h(L(e.zIndex),e.customStyle);return s(e.duration)&&(i.animationDuration=`${e.duration}s`),o(D(`div`,j({ref:r,style:i,class:[ue(),e.className]},t),[n.default?.call(n)]),[[S,e.show]])});return u(`touchmove`,a,{target:r}),()=>{let t=D(f,{name:`van-fade`,appear:!0},{default:c});return e.teleport?D(k,{to:e.teleport},{default:()=>[t]}):t}}})),fe=h({},se,{round:Boolean,position:z(`center`),closeIcon:z(`cross`),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:z(`top-right`),destroyOnClose:Boolean,safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[pe,G]=C(`popup`),me=b(F({name:pe,inheritAttrs:!1,props:fe,emits:[`open`,`close`,`opened`,`closed`,`keydown`,`update:show`,`clickOverlay`,`clickCloseIcon`],setup(e,{emit:r,attrs:i,slots:a}){let c,l,d=E(),p=E(),g=W(()=>e.show||!e.lazyRender),_=oe(()=>{let t={zIndex:d.value};if(s(e.duration)){let n=e.position===`center`?`animationDuration`:`transitionDuration`;t[n]=`${e.duration}s`}return t}),v=()=>{c||(c=!0,d.value=e.zIndex===void 0?ae():+e.zIndex,r(`open`))},b=()=>{c&&re(e.beforeClose,{done(){c=!1,r(`close`),r(`update:show`,!1)}})},x=t=>{r(`clickOverlay`,t),e.closeOnClickOverlay&&b()},C=()=>{if(e.overlay)return D(de,j(h({show:e.show,class:e.overlayClass,zIndex:d.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?`button`:void 0,tabindex:e.closeOnClickOverlay?0:void 0},e.overlayProps),t(),{onClick:x}),{default:a[`overlay-content`]})},w=e=>{r(`clickCloseIcon`,e),b()},te=()=>{if(e.closeable)return D(N,{role:`button`,tabindex:0,name:e.closeIcon,class:[G(`close-icon`,e.closeIconPosition),O],classPrefix:e.iconPrefix,onClick:w},null)},T,M=()=>{T&&clearTimeout(T),T=setTimeout(()=>{r(`opened`)})},F=()=>r(`closed`),L=e=>r(`keydown`,e),R=g(()=>{let{destroyOnClose:n,round:r,position:s,safeAreaInsetTop:c,safeAreaInsetBottom:l,show:u}=e;if(!(!u&&n))return o(D(`div`,j({ref:p,style:_.value,role:`dialog`,tabindex:0,class:[G({round:r,[s]:s}),{"van-safe-area-top":c,"van-safe-area-bottom":l}],onKeydown:L},i,t()),[a.default?.call(a),te()]),[[S,u]])}),z=()=>{let{position:t,transition:n,transitionAppear:r}=e,i=t===`center`?`van-fade`:`van-popup-slide-${t}`;return D(f,{name:n||i,appear:r,onAfterEnter:M,onAfterLeave:F},{default:R})};return m(()=>e.show,e=>{e&&!c&&(v(),i.tabindex===0&&ie(()=>{var e;(e=p.value)==null||e.focus()})),!e&&c&&(c=!1,r(`close`))}),n({popupRef:p}),U(p,()=>e.show&&e.lockScroll),u(`popstate`,()=>{e.closeOnPopstate&&(b(),l=!1)}),I(()=>{e.show&&v()}),ne(()=>{l&&=(r(`update:show`,!0),!1)}),y(()=>{e.show&&e.teleport&&(b(),l=!0)}),ee(A,()=>e.show),()=>e.teleport?D(k,{to:e.teleport},{default:()=>[C(),z()]}):D(P,null,[C(),z()])}})),K=0;function he(e){e?(K||document.body.classList.add(`van-toast--unclickable`),K++):K&&(K--,K||document.body.classList.remove(`van-toast--unclickable`))}var[ge,q]=C(`toast`),_e=[`show`,`overlay`,`teleport`,`transition`,`overlayClass`,`overlayStyle`,`closeOnClickOverlay`,`zIndex`],ve=F({name:ge,props:{icon:String,show:Boolean,type:z(`text`),overlay:Boolean,message:a,iconSize:a,duration:l(2e3),position:z(`middle`),teleport:[String,Object],wordBreak:String,className:null,iconPrefix:String,transition:z(`van-fade`),loadingType:String,forbidClick:Boolean,overlayClass:null,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:a},emits:[`update:show`],setup(t,{emit:n,slots:r}){let i,a=!1,o=()=>{let e=t.show&&t.forbidClick;a!==e&&(a=e,he(a))},c=e=>n(`update:show`,e),l=()=>{t.closeOnClick&&c(!1)},u=()=>clearTimeout(i),d=()=>{let{icon:n,type:r,iconSize:i,iconPrefix:a,loadingType:o}=t;if(n||r===`success`||r===`fail`)return D(N,{name:n||r,size:i,class:q(`icon`),classPrefix:a},null);if(r===`loading`)return D(e,{class:q(`loading`),size:i,type:o},null)},f=()=>{let{type:e,message:n}=t;if(r.message)return D(`div`,{class:q(`text`)},[r.message()]);if(s(n)&&n!==``)return e===`html`?D(`div`,{key:0,class:q(`text`),innerHTML:String(n)},null):D(`div`,{class:q(`text`)},[n])};return m(()=>[t.show,t.forbidClick],o),m(()=>[t.show,t.type,t.message,t.duration],()=>{u(),t.show&&t.duration>0&&(i=setTimeout(()=>{c(!1)},t.duration))}),I(o),R(o),()=>D(me,j({class:[q([t.position,t.wordBreak===`normal`?`break-normal`:t.wordBreak,{[t.type]:!t.icon}]),t.className],lockScroll:!1,onClick:l,onClosed:u,"onUpdate:show":c},v(t,_e)),{default:()=>[d(),f()]})}});function ye(){let e=d({show:!1}),t=t=>{e.show=t},r=n=>{h(e,n,{transitionAppear:!0}),t(!0)},i=()=>t(!1);return n({open:r,close:i,toggle:t}),{open:r,close:i,state:e,toggle:t}}function be(e){let t=r(e),n=document.createElement(`div`);return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}var xe={icon:``,type:`text`,message:``,className:``,overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:`body`,iconSize:void 0,iconPrefix:void 0,position:`middle`,transition:`van-fade`,forbidClick:!1,loadingType:void 0,overlayClass:``,overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1},J=[],Y=!1,X=h({},xe),Z=new Map;function Q(e){return M(e)?e:{message:e}}function Se(){let{instance:e,unmount:t}=be({setup(){let n=E(``),{open:r,state:i,close:a,toggle:o}=ye(),s=()=>{Y&&(J=J.filter(t=>t!==e),t())},c=()=>D(ve,j(i,{onClosed:s,"onUpdate:show":o}),null);return m(n,e=>{i.message=e}),x().render=c,{open:r,close:a,message:n}}});return e}function Ce(){if(!J.length||Y){let e=Se();J.push(e)}return J[J.length-1]}function $(e={}){if(!_)return{};let t=Ce(),n=Q(e);return t.open(h({},X,Z.get(n.type||X.type),n)),t}var we=(e=>t=>$(h({type:e},Q(t))))(`success`);export{$ as n,B as r,we as t};